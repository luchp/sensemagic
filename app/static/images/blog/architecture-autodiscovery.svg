<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .box { fill: #fff; stroke: #333; stroke-width: 2; }
      .primary { fill: #4CAF50; }
      .secondary { fill: #2196F3; }
      .accent { fill: #FF9800; }
      .text { fill: #333; font-family: Arial, sans-serif; font-size: 14px; }
      .title { font-size: 16px; font-weight: bold; }
      .arrow { stroke: #666; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .dashed { stroke-dasharray: 5,5; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" class="text title" font-size="20">
    Auto-Discovery Architecture
  </text>

  <!-- Git Repository -->
  <rect x="50" y="60" width="150" height="80" class="box secondary" rx="5"/>
  <text x="125" y="90" text-anchor="middle" class="text title">Git Repository</text>
  <text x="125" y="110" text-anchor="middle" class="text">app_rectifier.py</text>
  <text x="125" y="125" text-anchor="middle" class="text">app_test1.py</text>

  <!-- Discover.py -->
  <rect x="325" y="60" width="150" height="80" class="box primary" rx="5"/>
  <text x="400" y="90" text-anchor="middle" class="text title">discover.py</text>
  <text x="400" y="110" text-anchor="middle" class="text">Auto-scan routes</text>
  <text x="400" y="125" text-anchor="middle" class="text">Generate nginx config</text>

  <!-- Arrow: Git -> Discover -->
  <path d="M 200 100 L 325 100" class="arrow"/>
  <text x="260" y="95" text-anchor="middle" class="text" font-size="12">git pull</text>

  <!-- FastAPI -->
  <rect x="50" y="200" width="150" height="100" class="box accent" rx="5"/>
  <text x="125" y="225" text-anchor="middle" class="text title">FastAPI</text>
  <text x="125" y="245" text-anchor="middle" class="text">/app_rectifier/</text>
  <text x="125" y="260" text-anchor="middle" class="text">/app_test1/</text>
  <text x="125" y="275" text-anchor="middle" class="text">/static/</text>
  <text x="125" y="290" text-anchor="middle" class="text">Port 9000</text>

  <!-- Nginx Config -->
  <rect x="325" y="200" width="150" height="100" class="box secondary" rx="5"/>
  <text x="400" y="225" text-anchor="middle" class="text title">Nginx Config</text>
  <text x="400" y="245" text-anchor="middle" class="text">location blocks</text>
  <text x="400" y="260" text-anchor="middle" class="text">proxy_pass rules</text>
  <text x="400" y="275" text-anchor="middle" class="text">cache headers</text>

  <!-- Nginx -->
  <rect x="600" y="200" width="150" height="100" class="box primary" rx="5"/>
  <text x="675" y="225" text-anchor="middle" class="text title">Nginx</text>
  <text x="675" y="245" text-anchor="middle" class="text">Reverse Proxy</text>
  <text x="675" y="260" text-anchor="middle" class="text">SSL Termination</text>
  <text x="675" y="275" text-anchor="middle" class="text">Port 443</text>

  <!-- Arrows: Discover -> FastAPI & Nginx Config -->
  <path d="M 375 140 L 125 200" class="arrow dashed"/>
  <text x="220" y="165" text-anchor="middle" class="text" font-size="11">registers</text>

  <path d="M 400 140 L 400 200" class="arrow"/>
  <text x="420" y="175" text-anchor="middle" class="text" font-size="11">generates</text>

  <!-- Arrow: Nginx Config -> Nginx -->
  <path d="M 475 250 L 600 250" class="arrow"/>
  <text x="537" y="245" text-anchor="middle" class="text" font-size="11">applies</text>

  <!-- Arrow: Nginx -> FastAPI -->
  <path d="M 600 270 L 200 270" class="arrow"/>
  <text x="400" y="265" text-anchor="middle" class="text" font-size="11">proxy_pass</text>

  <!-- Client Browser -->
  <rect x="600" y="380" width="150" height="80" class="box accent" rx="5"/>
  <text x="675" y="410" text-anchor="middle" class="text title">Client Browser</text>
  <text x="675" y="430" text-anchor="middle" class="text">HTTPS Request</text>

  <!-- Arrow: Client -> Nginx -->
  <path d="M 675 380 L 675 300" class="arrow"/>

  <!-- Static Files -->
  <rect x="50" y="380" width="150" height="80" class="box secondary" rx="5"/>
  <text x="125" y="410" text-anchor="middle" class="text title">Static Files</text>
  <text x="125" y="430" text-anchor="middle" class="text">CSS, JS, Images</text>
  <text x="125" y="445" text-anchor="middle" class="text">Cached 1 year</text>

  <!-- Arrow: Static Files -> FastAPI -->
  <path d="M 125 380 L 125 300" class="arrow dashed"/>

  <!-- Legend -->
  <rect x="250" y="500" width="300" height="80" fill="none" stroke="#ccc" stroke-width="1" rx="5"/>
  <text x="400" y="520" text-anchor="middle" class="text title">Key Features</text>
  <text x="270" y="540" class="text">✓ Zero manual configuration</text>
  <text x="270" y="555" class="text">✓ Auto-discovery of routes</text>
  <text x="270" y="570" class="text">✓ Dynamic nginx generation</text>
</svg>

